<!DOCTYPE html>
<html>
<head>
<link id="theme-style" rel="stylesheet" href="xenv.css">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ShineOS</title>
<style>
body {
  background-image: none;
  background-color: #ffffff;
  margin: 0;
  height: 100vh;
  overflow: hidden;
}

#icons {

  display: flex;
  gap: 25px;
  padding: 25px;
  flex-wrap: wrap;
  background: rgba(242, 242, 242);
  border-radius: 16px;
  z-index: 10000;
}

@media (min-width: 768px) {
  #icons {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 25px;
    backdrop-filter: blur(50px);
    flex-wrap: nowrap;
  }
}

.icon {

  width: 80px;
  height: 100px;
  display: flex;
  flex-direction: column;
  align-items: center;
  transition: all 0.2s;
  text-align: center;
  position: relative;
}

.icon-image {
  width: 60px;
  height: 60px;
  margin-bottom: 8px;
  object-fit: contain;

}

.icon-label {
  color: black;
  font-size: 12px;
  line-height: 1.2;
  word-break: break-word;
  padding: 0 2px;
}

@media (hover: hover) and (min-width: 768px) {
  .icon {
    width: 32px;
    height: 32px;
    flex-direction: row;
    justify-content: center;
  }

  .icon:hover {
    transform: scale(1.2) translateY(-10px);
  }

  .icon-image {
    width: 32px;
    height: 32px;
    margin-bottom: 1px;
  }

  .icon-label {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    opacity: 0;
    transition: opacity 0.2s ease;
    white-space: nowrap;
  }

  .icon:hover .icon-label {
    opacity: 1;
  }

  .icon::after {
    content: '';
    position: absolute;
    bottom: -8px;
    width: 4px;
    height: 4px;
    background: rgba(0, 0, 0, 0.4);
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.2s ease;
  }

  .icon:hover::after {
    opacity: 1;
  }

.content {
  flex: 1;
  overflow: hidden;
}

.iframe-content {
  width: 100%;
  height: 100%;
  border: none;
}

.resize-handle {
  position: absolute;
  right: 0;
  bottom: 0;
  width: 5px;
  height: 5px;
  background: #ffffff;
  cursor: nwse-resize;
  z-index: 1001;
}
</style>
</head>
<body>
<div id="icons">
  <div class="icon" onclick="openApp('FreeDOS', '<iframe class=&quot;iframe-content&quot; src=&quot;https://bellard.org/jslinux/vm.html?url=freedos.cfg&mem=64&graphic=1&w=720&h=400&quot; sandbox=&quot;allow-scripts allow-same-origin&quot;></iframe>')">
    <img src="assets/apps/emulator/dos.png" class="icon-image">
    <span class="icon-label">FreeDOS</span>
  </div>
  <div class="icon" onclick="openApp('Windows 2000', '<iframe class=&quot;iframe-content&quot; src=&quot;https://bellard.org/jslinux/vm.html?url=win2k.cfg&mem=192&graphic=1&w=1024&h=768&quot; sandbox=&quot;allow-scripts allow-same-origin&quot;></iframe>')">
    <img src="assets/apps/emulator/win.png" class="icon-image">
    <span class="icon-label">Windows 2000</span>
  </div>
  <div class="icon" onclick="openApp('ShineOS', '<iframe class=&quot;iframe-content&quot; src=&quot;index.html&quot; sandbox=&quot;allow-scripts allow-same-origin&quot;></iframe>')">
    <img src="assets/system/logo.png" class="icon-image">
    <span class="icon-label">ShineOS</span>
  </div>
  <div class="icon" onclick="openApp('Alpine JSLinux (GUI)', '<iframe class=&quot;iframe-content&quot; src=&quot;https://bellard.org/jslinux/vm.html?url=alpine-x86-xwin.cfg&mem=256&graphic=1&quot; sandbox=&quot;allow-scripts allow-same-origin&quot;></iframe>')">
    <img src="assets/apps/emulator/alpine.png" class="icon-image">
    <span class="icon-label">Alpine JSLinux (GUI)</span>
  </div>
  <div class="icon" onclick="openApp('Alpine JSLinux (CLI)', '<iframe class=&quot;iframe-content&quot; src=&quot;https://bellard.org/jslinux/vm.html?url=alpine-x86.cfg&mem=192&quot; sandbox=&quot;allow-scripts allow-same-origin&quot;></iframe>')">
    <img src="assets/apps/emulator/alpine.png" class="icon-image">
    <span class="icon-label">Alpine JSLinux (CLI)</span>
  </div>
  <div class="icon" onclick="openApp('JSLinux (RISC) (GUI)', '<iframe class=&quot;iframe-content&quot; src=&quot;https://bellard.org/jslinux/vm.html?cpu=riscv64&url=buildroot-riscv64-xwin.cfg&graphic=1&mem=256&quot; sandbox=&quot;allow-scripts allow-same-origin&quot;></iframe>')">
    <img src="assets/apps/emulator/linux.png" class="icon-image">
    <span class="icon-label">JSLinux (RISC) (GUI)</span>
  </div>
  <div class="icon" onclick="openApp('JSLinux (RISC) (CLI)', '<iframe class=&quot;iframe-content&quot; src=&quot;https://bellard.org/jslinux/vm.html?cpu=riscv64&url=buildroot-riscv64.cfg&mem=256&quot; sandbox=&quot;allow-scripts allow-same-origin&quot;></iframe>')">
    <img src="assets/apps/emulator/linux.png" class="icon-image">
    <span class="icon-label">JSLinux (RISC) (CLI)</span>
  </div>
  <div class="icon" onclick="openApp('Fedora JSLinux (RISC) (GUI)', '<iframe class=&quot;iframe-content&quot; src=&quot;https://bellard.org/jslinux/vm.html?cpu=riscv64&url=fedora33-riscv-xwin.cfg&graphic=1&mem=256&quot; sandbox=&quot;allow-scripts allow-same-origin&quot;></iframe>')">
    <img src="assets/apps/emulator/fedora.png" class="icon-image">
    <span class="icon-label">Fedora JSLinux (RISC) (GUI)</span>
  </div>
  <div class="icon" onclick="openApp('Fedora JSLinux (RISC) (CLI)', '<iframe class=&quot;iframe-content&quot; src=&quot;https://bellard.org/jslinux/vm.html?cpu=riscv64&url=fedora33-riscv.cfg&mem=256&quot; sandbox=&quot;allow-scripts allow-same-origin&quot;></iframe>')">
    <img src="assets/apps/emulator/fedora.png" class="icon-image">
    <span class="icon-label">Fedora JSLinux (RISC) (CLI)</span>
  </div>
</div>

<div id="desktop"></div>

<script>
let windowCount = 0;
let zIndexCounter = 1000;
let isResizing = false;
let currentWindow = null;
let startX, startY, startWidth, startHeight;

        const savedTheme = localStorage.getItem('shineos-theme') || 'busenv';
        document.getElementById('theme-style').href = `${savedTheme}.css`;

function openApp(title, content) {
  const id = `window-${windowCount++}`;
  const windowElement = document.createElement('div');

  windowElement.className = 'window';
  windowElement.id = id;
  windowElement.style.zIndex = zIndexCounter++;
  windowElement.style.left = `${Math.random() * 100}px`;
  windowElement.style.top = `${Math.random() * 100}px`;

  const titleBar = document.createElement('div');
  titleBar.className = 'title-bar';
  titleBar.onmousedown = (e) => startDrag(e, id);

  const titleText = document.createElement('h1');
  titleText.textContent = title;

  const closeBtn = document.createElement('button');
  closeBtn.className = 'close-btn';
  closeBtn.textContent = 'X';
  closeBtn.onclick = () => closeWindow(id);

  const contentDiv = document.createElement('div');
  contentDiv.className = 'content';
  contentDiv.innerHTML = content;

  const resizeHandle = document.createElement('div');
  resizeHandle.className = 'resize-handle';
  resizeHandle.onmousedown = (e) => startResize(e, id);

  titleBar.appendChild(titleText);
  titleBar.appendChild(closeBtn);
  windowElement.appendChild(titleBar);
  windowElement.appendChild(contentDiv);
  windowElement.appendChild(resizeHandle);

  document.getElementById('desktop').appendChild(windowElement);
  return windowElement;
}

function closeWindow(id) {
  const windowElement = document.getElementById(id);
  if (windowElement) windowElement.remove();
}

let draggedElement = null;
let offsetX = 0;
let offsetY = 0;

function startDrag(event, id) {
  if (isResizing) return;
  draggedElement = document.getElementById(id);
  if (!draggedElement) return;

  draggedElement.style.zIndex = zIndexCounter++;
  const rect = draggedElement.getBoundingClientRect();
  offsetX = event.clientX - rect.left;
  offsetY = event.clientY - rect.top;

  document.addEventListener('mousemove', onMouseMove);
  document.addEventListener('mouseup', onMouseUp);
}

function onMouseMove(event) {
  if (draggedElement && !isResizing) {
    draggedElement.style.left = `${event.clientX - offsetX}px`;
    draggedElement.style.top = `${event.clientY - offsetY}px`;
  }
}

function onMouseUp() {
  document.removeEventListener('mousemove', onMouseMove);
  document.removeEventListener('mouseup', onMouseUp);
  draggedElement = null;
}

function startResize(e, id) {
  e.preventDefault();
  isResizing = true;
  currentWindow = document.getElementById(id);
  startX = e.clientX;
  startY = e.clientY;
  startWidth = parseInt(document.defaultView.getComputedStyle(currentWindow).width, 10);
  startHeight = parseInt(document.defaultView.getComputedStyle(currentWindow).height, 10);

  document.addEventListener('mousemove', resize);
  document.addEventListener('mouseup', stopResize);
}

function resize(e) {
  if (isResizing && currentWindow) {
    const width = startWidth + (e.clientX - startX);
    const height = startHeight + (e.clientY - startY);

    currentWindow.style.width = `${width}px`;
    currentWindow.style.height = `${height}px`;

    const content = currentWindow.querySelector('.content');
    if (content) {
      content.style.width = '100%';
      content.style.height = 'calc(100% - 40px)';
    }
  }
}

function stopResize() {
  isResizing = false;
  currentWindow = null;
  document.removeEventListener('mousemove', resize);
  document.removeEventListener('mouseup', stopResize);
}
</script>
</body>
</html>